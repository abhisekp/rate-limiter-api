<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Rate Limiter API by abhisekp</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Rate Limiter API</h1>
      <h2 class="project-tagline">A simple library to easily manage rate limits of APIs without any hassles.</h2>
      <a href="https://github.com/abhisekp/rate-limiter-api" class="btn">View on GitHub</a>
      <a href="https://github.com/abhisekp/rate-limiter-api/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/abhisekp/rate-limiter-api/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="-rate-limiter-api" class="anchor" href="#-rate-limiter-api" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a id="app-top"></a> Rate Limiter API</h1>

<p>A simple library to easily manage rate limits of APIs without any hassles.</p>

<p><a href="#app-top"><img src="http://i.imgur.com/JDFpgQZ.jpg" alt="Rate Limiter API image" title="Rate Limiter API image"></a></p>

<p><a href="#contrib"><img src="https://img.shields.io/badge/all_contributors-1-orange.svg?style=flat-square" alt="All Contributors"></a> <a href="LICENSE"><img src="https://img.shields.io/badge/License-MIT-56A902.svg?style=flat-square&amp;maxAge=2592000" alt="MIT License"></a> <a href="https://badge.fury.io/js/rate-limiter-api"><img src="https://img.shields.io/npm/v/rate-limiter-api.svg?maxAge=2592000" alt="npm version"></a>  </p>

<h2>
<a id="-table-of-contents" class="anchor" href="#-table-of-contents" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a id="toc"></a> Table of Contents</h2>

<ul>
<li>
<a href="#usage">How to Use</a>

<ul>
<li><a href="#usage-browser">Browser</a></li>
<li><a href="#usage-nodejs">NodeJS</a></li>
</ul>
</li>
<li><a href="#public-api">Public API</a></li>
<li><a href="#stats">Stats</a></li>
<li><a href="#techs">Technologies Used</a></li>
<li><a href="#help">Help &amp; Support</a></li>
<li><a href="#contrib">Contributors</a></li>
<li><a href="#license">License</a></li>
<li><a href="#contact">Contact</a></li>
</ul>

<h2>
<a id="usage-" class="anchor" href="#usage-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a id="usage"></a>Usage <a href="#toc" title="Table of Contents"><kbd>⮭</kbd></a>
</h2>

<h4>
<a id="browser-" class="anchor" href="#browser-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a id="usage-browser"></a>Browser <a href="#toc" title="Table of Contents"><kbd>⮭</kbd></a>
</h4>

<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>https://cdn.rawgit.com/abhisekp/rate-limiter-api/master/dist/rate-limiter-api.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;

<span class="pl-s1">&lt;<span class="pl-ent">script</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>text/javascript<span class="pl-pds">"</span></span>&gt;</span>
<span class="pl-s1">  <span class="pl-k">var</span> rateLimiter <span class="pl-k">=</span> <span class="pl-en">RateLimiterAPI</span>()</span>
<span class="pl-s1">&lt;/<span class="pl-ent">script</span>&gt;</span></pre></div>

<h4>
<a id="nodejs-" class="anchor" href="#nodejs-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a id="usage-nodejs"></a>NodeJS <a href="#toc" title="Table of Contents"><kbd>⮭</kbd></a>
</h4>

<div class="highlight highlight-source-shell"><pre>$ {sudo -H} npm install -S rate-limiter-api</pre></div>

<div class="highlight highlight-source-js"><pre><span class="pl-k">import</span> <span class="pl-smi">RateLimiterAPI</span> <span class="pl-k">from</span> <span class="pl-s"><span class="pl-pds">'</span>rate-limiter-api<span class="pl-pds">'</span></span></pre></div>

<h2>
<a id="public-interface-" class="anchor" href="#public-interface-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a id="public-api"></a>Public Interface <a href="#toc" title="Table of Contents"><kbd>⮭</kbd></a>
</h2>

<ul>
<li><code>rateLimiter = RateLimiterAPI({threshold: 5})</code></li>
<li>
<code>rateLimiter.limit(requestHandler) =&gt; Promise</code>

<ul>
<li>
<code>rateLimiter.updateRateLimits</code> on success to update rates</li>
<li>
<code>requestHandler(responseHandler)</code> on success to continue</li>
</ul>
</li>
</ul>

<hr>

<div class="highlight highlight-source-js"><pre><span class="pl-k">import</span> <span class="pl-smi">RateLimiterAPI</span> <span class="pl-k">from</span> <span class="pl-s"><span class="pl-pds">'</span>rate-limiter-api<span class="pl-pds">'</span></span>

<span class="pl-k">const</span> <span class="pl-c1">rateLimiter</span> <span class="pl-k">=</span> <span class="pl-en">RateLimiterAPI</span>({
  threshold<span class="pl-k">:</span> <span class="pl-c1">5</span>, <span class="pl-c">// leave `threshold` amount of api requests intact (minimum: 1)</span>
})</pre></div>

<p>Pass an optional <code>threshold</code> value which would limit the total rate limits till the threshold is reached in the current session pulse till rate reset.</p>

<hr>

<div class="highlight highlight-source-js"><pre><span class="pl-k">const</span> <span class="pl-c1">request</span> <span class="pl-k">=</span> <span class="pl-smi">rateLimiter</span>.<span class="pl-en">limit</span>(requestHandler) <span class="pl-c">//=&gt; Promise</span>

<span class="pl-k">function</span> <span class="pl-en">requestHandler</span>(<span class="pl-smi">responseHandler</span>) {
  <span class="pl-en">fetch</span>(<span class="pl-s"><span class="pl-pds">'</span>https://api.example.com/get<span class="pl-pds">'</span></span>)
    .<span class="pl-en">then</span>((<span class="pl-smi">response</span>) <span class="pl-k">=&gt;</span> {
      <span class="pl-smi">rateLimiter</span>.<span class="pl-en">updateRateLimits</span>({
        rateLimit<span class="pl-k">:</span> <span class="pl-smi">response</span>.<span class="pl-c1">headers</span>.<span class="pl-smi">rateLimit</span>,
        rateRemaining<span class="pl-k">:</span> <span class="pl-smi">response</span>.<span class="pl-c1">headers</span>.<span class="pl-smi">rateRemaining</span>,
        rateReset<span class="pl-k">:</span> <span class="pl-smi">response</span>.<span class="pl-c1">headers</span>.<span class="pl-smi">rateReset</span>,
      })

      <span class="pl-en">responseHandler</span>(<span class="pl-c1">null</span>, <span class="pl-smi">response</span>.<span class="pl-c1">body</span>)
    })
    .<span class="pl-en">catch</span>((<span class="pl-smi">err</span>) <span class="pl-k">=&gt;</span> {
      <span class="pl-en">responseHandler</span>(err)
    })
}</pre></div>

<p>The <code>limit</code> method is passed a <code>requestHandler</code> which would manage the request and then call the node-style <code>responseHandler</code> callback (which gets passed by the RateLimiter library to the <code>requestHandler</code> function) after the request is successful or unsuccessful accordingly.</p>

<p>The <code>request</code> method returns a <code>Promise</code>.</p>

<blockquote>
<p>responseHandler(Error, response)<br>
where the first parameter is the Error object and the seconds parameter is the <code>response</code>.</p>
</blockquote>

<p><code>responseHandler</code> callback must be called to continue getting responses.</p>

<p>Update the rate limits i.e. <code>{rateLimit, rateRemaining, rateReset}</code> got from the header using <code>updateRateLimits</code> method.</p>

<hr>

<div class="highlight highlight-source-js"><pre>request
  .<span class="pl-en">then</span>((<span class="pl-smi">response</span>) <span class="pl-k">=&gt;</span> {
    <span class="pl-en">console</span>.<span class="pl-c1">dir</span>(response, {colors<span class="pl-k">:</span><span class="pl-c1">1</span>})
  })
  .<span class="pl-en">catch</span>((<span class="pl-smi">error</span>) <span class="pl-k">=&gt;</span> {
    <span class="pl-en">console</span>.<span class="pl-c1">error</span>(<span class="pl-smi">error</span>.<span class="pl-smi">message</span>)
  })</pre></div>

<p>When the request completes, the <code>Promise</code> resolves and can be thenable to get the response or error.</p>

<h2>
<a id="stats-" class="anchor" href="#stats-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a id="stats"></a>Stats <a href="#toc" title="Table of Contents"><kbd>⮭</kbd></a>
</h2>

<p>1 text file.<br>
1 unique file.<br>
0 files ignored.  </p>

<p><a href="https://github.com/AlDanial/cloc">https://github.com/AlDanial/cloc</a> v 1.66  T=0.04 s (22.7 files/s, 2516.9 lines/s)</p>

<table>
<thead>
<tr>
<th align="left">Language</th>
<th align="center">files</th>
<th align="center">blank</th>
<th align="center">comment</th>
<th align="center">code</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">JavaScript</td>
<td align="center">1</td>
<td align="center">12</td>
<td align="center">37</td>
<td align="center">62</td>
</tr>
</tbody>
</table>

<h2>
<a id="technologies-used-" class="anchor" href="#technologies-used-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a id="techs"></a>Technologies Used <a href="#toc" title="Table of Contents"><kbd>⮭</kbd></a>
</h2>

<ul>
<li>
<a href="http://babeljs.io"><strong>Babel</strong></a> — Transpiles modern JS to compatible and runnable JS</li>
<li>
<a href="https://github.com/stampit-org/stampit#readme"><strong>Stamp It</strong></a> - Composable inheritance object creation libray</li>
<li>
<a href="https://caolan.github.io/async/index.html"><strong>Async JS</strong></a> - Utility for asynchronous functions</li>
<li>
<a href="https://lodash.com/"><strong>Lodash</strong></a> - Utility library</li>
</ul>

<h2>
<a id="help--support-" class="anchor" href="#help--support-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a id="help"></a>Help &amp; Support <a href="#toc" title="Table of Contents"><kbd>⮭</kbd></a>
</h2>

<ul>
<li>
<a href="https://babeljs.slack.com"><strong>BabelJS</strong></a> — BabelJS Slack Chat Room</li>
<li>
<a href="https://gitter.im/nodejs/node"><strong>nodejs/node</strong></a> — NodeJS Gitter Chat Room</li>
<li>
<a href="https://medium.com/@koresar/fun-with-stamps-episode-1-stamp-basics-e0627d81efe0"><strong>Fun with Stamps</strong></a> - Learn StampIt</li>
</ul>

<h2>
<a id="contributors-" class="anchor" href="#contributors-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a id="contrib"></a>Contributors <a href="#toc" title="Table of Contents"><kbd>⮭</kbd></a>
</h2>



<table>
<thead>
<tr>
<th align="center">
<a href="http://about.me/abhisekp"><img src="https://avatars.githubusercontent.com/u/1029200?v=3&amp;s=100" alt="Abhisek Pattnaik"><br><sub>Abhisek Pattnaik</sub></a><br><a href="https://github.com/abhisekp/Practice-Modern-JavaScript/commits?author=abhisekp"><g-emoji alias="computer" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f4bb.png">💻</g-emoji></a> <g-emoji alias="art" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f3a8.png">🎨</g-emoji> <a href="https://github.com/abhisekp/Practice-Modern-JavaScript/commits?author=abhisekp"><g-emoji alias="book" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f4d6.png">📖</g-emoji></a> <g-emoji alias="bulb" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji>
</th>
</tr>
</thead>
<tbody>
</tbody>
</table>



<p>This project follows the <a href="https://github.com/kentcdodds/all-contributors#emoji-key">all-contributors</a> specification.</p>

<blockquote>
<p><strong>All types of Contributions are Welcome</strong> <g-emoji alias="pray" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f64f.png">🙏</g-emoji></p>
</blockquote>

<h2>
<a id="license-" class="anchor" href="#license-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a id="license"></a>License <a href="#toc" title="Table of Contents"><kbd>⮭</kbd></a>
</h2>

<p><a href="LICENSE"><strong>MIT</strong></a> © <a href="https://github.com/abhisekp"><strong>Abhisek Patnaik</strong></a></p>

<blockquote>
<hr>

<p><a id="contact"></a></p>

<p align="center">
Tweet <kbd><a href="https://twitter.com/abhisek"><b><img src="https://i.imgur.com/wOPZd0Y.png?1"> @abhisek</b></a></kbd><br>
Know <kbd><b><a href="https://about.me/abhisekp">about/abhisekp</a></b></kbd><br>
Chat with <kbd><a href="https://gitter.im/abhisekp">
<img src="https://i.imgur.com/ThSWa6Y.png?2"> <b>@abhisekp</b></a></kbd>
</p>

<hr>
</blockquote>

<div align="right">
 <a href="#toc" title="Table of Contents"><kbd><b>Table of Contents ⮭</b></kbd></a><br>
 <a href="#app-top"><kbd><b>back to top ⮭</b></kbd></a>
</div>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/abhisekp/rate-limiter-api">Rate Limiter API</a> is maintained by <a href="https://github.com/abhisekp">abhisekp</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
